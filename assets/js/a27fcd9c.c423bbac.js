"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[140],{2712:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>a,frontMatter:()=>l,metadata:()=>c,toc:()=>o});const c=JSON.parse('{"id":"container-fos-manual","title":"Container FOS\u64cd\u4f5c\u624b\u518c","description":"\uff08FortiGate-Docker\uff09","source":"@site/docs/Container FOS\u64cd\u4f5c\u624b\u518c.md","sourceDirName":".","slug":"/container-fos-manual","permalink":"/container-fos-manual","draft":false,"unlisted":false,"editUrl":"https://github.com/XYM-IT/XYM-IT.github.io/tree/main/docs/Container FOS\u64cd\u4f5c\u624b\u518c.md","tags":[],"version":"current","frontMatter":{"id":"container-fos-manual","title":"Container FOS\u64cd\u4f5c\u624b\u518c"},"sidebar":"tutorialSidebar","previous":{"title":"\u9996\u9875","permalink":"/"},"next":{"title":"FortiGate\u56db\u5c42\u8f6c\u4e03\u5c42\u540e\u95ee\u9898\u603b\u7ed3","permalink":"/L4toL7"}}');var r=i(4848),s=i(8453);const l={id:"container-fos-manual",title:"Container FOS\u64cd\u4f5c\u624b\u518c"},d="Container FOS\u64cd\u4f5c\u624b\u518c",t={},o=[{value:"\u73af\u5883\u4ecb\u7ecd",id:"\u73af\u5883\u4ecb\u7ecd",level:2},{value:"\u4e0a\u4f20\u955c\u50cf\u6587\u4ef6\u5230\u670d\u52a1\u5668",id:"\u4e0a\u4f20\u955c\u50cf\u6587\u4ef6\u5230\u670d\u52a1\u5668",level:2},{value:"\u52a0\u8f7d\u955c\u50cf",id:"\u52a0\u8f7d\u955c\u50cf",level:2},{value:"\u521b\u5efa\u5bb9\u5668\u7f51\u5361",id:"\u521b\u5efa\u5bb9\u5668\u7f51\u5361",level:2},{value:"\u542f\u52a8\u5bb9\u5668\u5e76\u8fde\u63a5\u7f51\u5361",id:"\u542f\u52a8\u5bb9\u5668\u5e76\u8fde\u63a5\u7f51\u5361",level:2},{value:"\u5bfc\u5165\u8bb8\u53ef",id:"\u5bfc\u5165\u8bb8\u53ef",level:2},{value:"\u5176\u4ed6",id:"\u5176\u4ed6",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"container-fos\u64cd\u4f5c\u624b\u518c",children:"Container FOS\u64cd\u4f5c\u624b\u518c"})}),"\n",(0,r.jsx)(n.p,{children:"\uff08FortiGate-Docker\uff09"}),"\n",(0,r.jsx)(n.h2,{id:"\u73af\u5883\u4ecb\u7ecd",children:"\u73af\u5883\u4ecb\u7ecd"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://i.miji.bid/2025/05/11/b9ec7018f0b331200563383d74a6edb7.png",alt:"image-20250511133943142"})}),"\n",(0,r.jsx)(n.p,{children:"\u672c\u6b21\u73af\u5883\u90e8\u7f72\u5728Ubuntu 22.04.5 LTS (GNU/Linux 6.8.0-51-generic x86_64)"}),"\n",(0,r.jsx)(n.p,{children:"Docker\u7248\u672c\u4e3a\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Version: 27.5.1"}),"\n",(0,r.jsx)(n.li,{children:"API version: 1.47"}),"\n",(0,r.jsx)(n.li,{children:"Go version: go1.22.11"}),"\n",(0,r.jsx)(n.li,{children:"Git commit: 9f9e405"}),"\n",(0,r.jsx)(n.li,{children:"Built: Wed Jan 22 13:41:31 2025"}),"\n",(0,r.jsx)(n.li,{children:"OS/Arch: linux/amd64"}),"\n",(0,r.jsx)(n.li,{children:"Context: default"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u4e0a\u4f20\u955c\u50cf\u6587\u4ef6\u5230\u670d\u52a1\u5668",children:"\u4e0a\u4f20\u955c\u50cf\u6587\u4ef6\u5230\u670d\u52a1\u5668"}),"\n",(0,r.jsx)(n.p,{children:"\u901a\u8fc7\u4f7f\u7528scp\u547d\u4ee4\uff0c\u5c06\u672c\u5730\u955c\u50cf\u53d1\u9001\u5230\u670d\u52a1\u5668\u4e2d\uff0c\u670d\u52a1\u5668\u9700\u8981\u5f00\u542fssh\u624d\u80fd\u4f7f\u7528scp\uff0c\u547d\u4ee4\u793a\u4f8b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"scp -r FOS_X64_DOCKER-v7-build0255-FORTINET.tar.gz admin@192.168.0.1:/home/username/\n"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"scp\u662f\u547d\u4ee4\uff0c"}),"\n",(0,r.jsx)(n.li,{children:"-r\u662f\u9700\u8981\u4e0a\u4f20\u7684\u6587\u4ef6\u540d\u79f0"}),"\n",(0,r.jsx)(n.li,{children:"admin@192.168.0.1\u662f\u8981\u4e0a\u4f20\u7684\u670d\u52a1\u5668\u7528\u6237\u540d\u548c IP \u5730\u5740"}),"\n",(0,r.jsx)(n.li,{children:"/home/username/\u662f\u8981\u62f7\u5165\u7684\u670d\u52a1\u5668\u6587\u4ef6\u5939\u8def\u5f84"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u52a0\u8f7d\u955c\u50cf",children:"\u52a0\u8f7d\u955c\u50cf"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"sudo docker load -i FOS_ARM64_DOCKER-v7-build0230-FORTINET.tar.gz\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u67e5\u770b\u662f\u5426\u6b63\u5e38\u52a0\u8f7d\u4f7f\u7528docker image ls \u67e5\u770b"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://i.miji.bid/2025/05/11/db90a42a88ea3e49d38c519cc32ba68e.png",alt:"\u955c\u50cf\u52a0\u8f7d\u56fe"})}),"\n",(0,r.jsx)(n.h2,{id:"\u521b\u5efa\u5bb9\u5668\u7f51\u5361",children:"\u521b\u5efa\u5bb9\u5668\u7f51\u5361"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"docker network create --driver=bridge --subnet=10.0.20.0/24 lan0\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u547d\u4ee4\u89e3\u91ca\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--driver"})," \u7f51\u5361\u7c7b\u578b"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--subnet=10.0.20.0/24"})," \u8868\u793a\u7f51\u5361\u7684\u7f51\u6bb5\u4e5f\u8868\u793aFortiGate\u4f7f\u7528\u7684\u7f51\u6bb5"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"lan0"})," \u8868\u793adocker\u5bb9\u5668\u4e2d\u7f51\u7edc\u7684\u540d\u79f0"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u542f\u52a8\u5bb9\u5668\u5e76\u8fde\u63a5\u7f51\u5361",children:"\u542f\u52a8\u5bb9\u5668\u5e76\u8fde\u63a5\u7f51\u5361"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"docker run -d \\\n-v /etc/localtime:/etc/localtime:ro \\\n-v /text:/data \\\n--cpus 2 \\\n--memory 1024m \\\n--cap-add=NET_RAW \\\n--cap-add=NET_ADMIN \\\n--cap-add=SYS_ADMIN \\\n--name fos \\\n-p 8080:80 \\\n-p 500:500/udp \\\n-p 4500:4500/udp \\\n--net=lan0 \\\nfos\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://i.miji.bid/2025/05/11/b9450a8a429824437ba9df9dfb13b1bc.png",alt:"\u5bb9\u5668\u542f\u52a8\u56fe"})}),"\n",(0,r.jsx)(n.p,{children:"\u547d\u4ee4\u89e3\u91ca\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--net="})," \u8fd9\u91cc\u5199\u7684\u662f\u6211\u4eec\u521a\u624d\u521b\u5efa\u7684\u7f51\u7edc\u540d\u79f0"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-v /etc/localtime:/etc/localtime:ro"}),"\uff1a\u5c06\u5bbf\u4e3b\u673a\u7684\u672c\u5730\u65f6\u95f4\u6587\u4ef6\u6302\u8f7d\u5230\u5bb9\u5668\uff0c\u786e\u4fdd\u5bb9\u5668\u4f7f\u7528\u5bbf\u4e3b\u673a\u7684\u65f6\u95f4"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-v /text:/data"}),"\uff1a\u5c06\u5bbf\u4e3b\u673a\u7684 /text \u76ee\u5f55\u6302\u8f7d\u5230\u5bb9\u5668\u7684 /data \u76ee\u5f55"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--cpus 2"}),"\uff1a\u9650\u5236\u5bb9\u5668\u4f7f\u7528\u6700\u591a 2 \u4e2a CPU \u6838\u5fc3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--memory 1024m"}),"\uff1a\u9650\u5236\u5bb9\u5668\u6700\u591a\u4f7f\u7528 1GB \u7684\u5185\u5b58"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--cap-add=NET_RAW"})," \u548c\u5176\u4ed6 ",(0,r.jsx)(n.code,{children:"--cap-add"})," \u53c2\u6570\uff1a\u4e3a\u5bb9\u5668\u6dfb\u52a0\u7279\u6743\u6743\u9650\uff0c\u4f7f\u5bb9\u5668\u80fd\u591f\u8fdb\u884c\u7f51\u7edc\u548c\u7cfb\u7edf\u7ba1\u7406"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-p 8080:80"}),"\uff1a\u5c06\u5bbf\u4e3b\u673a\u7684 8080 \u7aef\u53e3\u6620\u5c04\u5230\u5bb9\u5668\u7684 80 \u7aef\u53e3\uff08\u901a\u5e38\u662f HTTP \u670d\u52a1\uff09"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--net=lan0"}),"\uff1a\u6307\u5b9a\u5bb9\u5668\u8fde\u63a5\u7684\u7f51\u7edc\u4e3a lan0\uff0c\u786e\u4fdd\u5bb9\u5668\u4f7f\u7528\u6b63\u786e\u7684\u7f51\u7edc\u63a5\u53e3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"fos"}),"\uff1a\u6307\u5b9a\u8981\u8fd0\u884c\u7684 Docker \u955c\u50cf\u540d"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u5bfc\u5165\u8bb8\u53ef",children:"\u5bfc\u5165\u8bb8\u53ef"}),"\n",(0,r.jsx)(n.p,{children:"\u8fd0\u884c\u5b8c\u4e0a\u4e00\u6b65\u7684\u547d\u4ee4\u4e4b\u540e\u4f1a\u81ea\u52a8\u542f\u52a8FortiGate\uff0c\u7528\u6237\u540d\u662fadmin\u5bc6\u7801\u4e3a\u7a7a\u76f4\u63a5\u56de\u8f66\uff0c\u542f\u52a8\u540e\u4f7f\u7528"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'exe import-vmlicense "license\u5185\u5bb9\u5168\u9009\u590d\u5236\u7c98\u8d34\u5230\u8fd9"\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u5bfc\u5165license\u6587\u4ef6"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://i.miji.bid/2025/05/11/beae8ae162bf7dca99b798213c8e8814.png",alt:"\u8bb8\u53ef\u5bfc\u5165\u56fe"})}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679c\u5361\u5728 System is ready\u754c\u9762\u4e0d\u8981\u614c\uff0c\u91cd\u65b0\u6253\u5f00\u4e00\u4e2a\u9875\u9762\u8f93\u5165"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"sudo docker exec -it fos /bin/cli\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u6761\u547d\u4ee4\u662f\u8fdb\u5165FortiGate\u7684\u547d\u4ee4\u884c\u754c\u9762"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-it fos"})," \u4e2d\u7684fos\u8868\u793a\u5bb9\u5668\u7684\u540d\u79f0"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://i.miji.bid/2025/05/11/3b1908fa55c43da53e818b75c7bf15df.png",alt:"\u547d\u4ee4\u884c\u754c\u9762"})}),"\n",(0,r.jsx)(n.p,{children:"\u7136\u540e\u518d\u4f7f\u7528"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'exe import-vmlicense "license\u5185\u5bb9\u5168\u9009\u590d\u5236\u7c98\u8d34\u5230\u8fd9"\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u5bfc\u5165license\u6587\u4ef6"}),"\n",(0,r.jsx)(n.p,{children:"\u7c98\u8d34\u8fdb\u53bb\u4e4b\u540e\u4f1a\u63d0\u793a\u8bc1\u4e66\u5bfc\u5165\u6210\u529f\uff0c\u7a0d\u7b49\u7247\u523b\u4f1a\u63d0\u793a\u8bc1\u4e66\u66f4\u65b0\uff0c\u66f4\u65b0\u5b8c\u4f7f\u7528"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"docker exec -it fos /bin/cli\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u91cd\u65b0\u8fdb\u5165FortiGate \u547d\u4ee4\u884c"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://i.miji.bid/2025/05/11/4eeb44a7bd2b385fcbe9792748bb05aa.png",alt:"\u8bc1\u4e66\u66f4\u65b0\u56fe"})}),"\n",(0,r.jsx)(n.p,{children:"\u8fdb\u53bb\u4e4b\u540e\u5c31\u5230\u4e86\u719f\u6089\u7684\u547d\u4ee4\u884c\u754c\u9762\u4e86"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://i.miji.bid/2025/05/11/8a12b048f4b7d385ca0282eb1b7eff6d.png",alt:"\u547d\u4ee4\u884c\u754c\u9762"})}),"\n",(0,r.jsx)(n.h2,{id:"\u5176\u4ed6",children:"\u5176\u4ed6"}),"\n",(0,r.jsx)(n.p,{children:"\u8fdb\u5165FortiGate \u5e95\u5c42 \u547d\u4ee4\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"sysctl sh\n"})}),"\n",(0,r.jsx)(n.p,{children:"Exit\u8fd4\u56de\u5230fortigate cli"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://i.miji.bid/2025/05/11/38afb779e31f10de1aa3a06037dd2be7.png",alt:"\u5e95\u5c42\u547d\u4ee4"})}),"\n",(0,r.jsx)(n.p,{children:"\u5e38\u7528Docker\u547d\u4ee4\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Docker ps -a"})," / \u67e5\u770b\u5bb9\u5668"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Docker network ls"})," / \u67e5\u770b\u7f51\u7edc"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Docker rm stop \u5bb9\u5668\u540d\u79f0"})," / \u5173\u95ed\u5bb9\u5668"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Docker rm \u5bb9\u5668\u540d\u79f0"})," / \u5220\u9664\u5bb9\u5668"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Docker network rm \u7f51\u7edc\u540d\u79f0"})," / \u5220\u9664\u7f51\u7edc"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u9700\u8981\u5220\u9664\u5bb9\u5668\uff0c\u9700\u8981\u5148\u5220\u9664\u5173\u8054\u5bb9\u5668\u7684\u7f51\u7edc\uff0c\u7136\u540e\u505c\u6b62\u5bb9\u5668\uff0c\u518d\u5220\u9664\u5bb9\u5668\u3002"}),"\n",(0,r.jsx)(n.p,{children:"Exit \u547d\u4ee4\u53ef\u4ee5\u4ece\u5e95\u5c42\u5207\u5230cli\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u4ececli\u5207\u5230\u7269\u7406\u673a\u547d\u4ee4\u884c\u3002"}),"\n",(0,r.jsx)(n.p,{children:"License\u6587\u4ef6\u662f\u9700\u8981\u4ecesupport\u7f51\u7ad9\u4e0a\u6ce8\u518c\u540e\u4e0b\u8f7d\u6253\u5f00\u3002"})]})}function a(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>d});var c=i(6540);const r={},s=c.createContext(r);function l(e){const n=c.useContext(s);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),c.createElement(s.Provider,{value:n},e.children)}}}]);